# Generated Code License

## MIT License for Generated Code

All code generated by the SCE Code Generator (`codegen.py`) is provided under the **MIT License** and may be used without restriction in both open source and commercial projects.

### What is "Generated Code"?

Generated code refers to the output files created by running:

```bash
python3 tools/codegen/codegen.py your_state_machine.scxml -o output/
```

This typically produces a header file (e.g., `your_state_machine_sm.h`) containing:
- State and Event enums
- Policy class with state machine logic
- Generated transition and action handlers

### License Terms for Generated Code

```
MIT License

Copyright (c) 2025 [Author of the input SCXML file]

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

### Copyright Ownership

**You own the generated code.** The copyright belongs to the author of the input SCXML file, not to the SCE project or tool authors. This follows established precedent from similar code generation tools (ANTLR, Bison, Protocol Buffers, Ragel).

### Runtime Engine Dependency

**Important:** While the generated code itself is MIT licensed, it depends on the SCE Execution Engine for runtime functionality. The execution engine is licensed separately under a **Dual License** model:

1. **LGPL-2.1** - For unmodified engine use (FREE, open source or proprietary OK)
2. **Commercial License** - For proprietary engine modifications

See [LICENSE](LICENSE) and [LICENSE-COMMERCIAL.md](LICENSE-COMMERCIAL.md) for licensing details.

## Legal Precedent

This licensing model follows well-established patterns from:

- **ANTLR** (BSD tool, unrestricted generated parsers)
- **Bison/Flex** (GPL tool with special exception for generated code)
- **Protocol Buffers** (Apache 2.0 tool, user-owned generated code)
- **Qt moc/uic** (Dual GPL/Commercial, unrestricted generated code)
- **Ragel** (MIT tool, explicitly unrestricted generated code)

## Frequently Asked Questions

### Can I use generated code in my commercial product?

**Yes.** Generated code is MIT licensed and may be used in any project, including commercial/proprietary products, without restriction.

### Do I need to include the MIT license in my product?

**Yes, for the generated code.** The MIT license requires including the copyright notice and permission text in "all copies or substantial portions of the Software." This typically means:

- Include LICENSE text in your product documentation
- Include copyright notice in source code headers (already done by codegen)

### Do I need a commercial license for the generator tool?

**No.** The code generator (`codegen.py`) is MIT licensed. You can use it freely to generate code for any purpose.

### Do I need a commercial license for the runtime engine?

**It depends:**
- **Using unmodified engine**: Use LGPL-2.1 (FREE, open source or proprietary OK)
- **Modifying engine for proprietary use**: Purchase Commercial License via GitHub Sponsors ($100 Individual / $500 Enterprise)

See [LICENSE](LICENSE) and [LICENSE-COMMERCIAL.md](LICENSE-COMMERCIAL.md) for details.

### What if I modify the generated code?

You own the generated code, so you may modify it freely. Modified versions are still under the MIT license (derivative works).

### Can I distribute the generated code without the SCE engine?

**Technically, yes** - but it won't function without the engine headers. In practice:
- You distribute: Generated code (.h files)
- Users need: SCE engine headers and library (separate licensing)

### Does template instantiation create a derivative work?

**No.** Following GCC precedent, C++ template instantiation does not create a derivative work of the template code. Generated code + engine templates combine at compile-time (aggregation, not derivation).

## Example Usage Scenarios

### Scenario 1: Open Source Robot Project (LGPL-2.1)

```bash
# Generate code from SCXML
python3 codegen.py robot_controller.scxml -o src/

# Use SCE engine (LGPL-2.1 - unmodified)
cmake ..
make

# Distribute
# - robot_controller_sm.h (generated, MIT)
# - SCE engine headers (LGPL-2.1, unmodified)
# - Your project source (MIT/Apache/GPL/BSD - your choice)
```

**License requirements:** Engine unmodified, dynamically linked or LGPL-compliant static linking.

### Scenario 2: Commercial Medical Device (Proprietary)

```bash
# Generate code from SCXML
python3 codegen.py device_controller.scxml -o src/

# Use SCE engine (Commercial License)
cmake -DRSM_LICENSE=COMMERCIAL ..
make

# Distribute
# - device_controller_sm.h (generated, MIT - you own it)
# - SCE engine (Commercial License via GitHub Sponsors - $100 Individual / $500 Enterprise)
# - Your proprietary code (closed source allowed)
```

**License requirements:**
- Generated code: MIT (no restrictions)
- SCE engine: Commercial license required
- Your code: Can be proprietary

### Scenario 3: Internal Corporate Tool (Not Distributed)

```bash
# Generate code for internal use
python3 codegen.py workflow_engine.scxml -o src/

# Use SCE engine (your choice)
# LGPL-2.1: Unmodified engine (FREE)
# Commercial: If modifying engine for proprietary use
```

**License requirements:** Internal use has more flexibility. LGPL-2.1 allows proprietary use with unmodified engine.

## Contact

For licensing questions or clarifications:

- **Email:** newmassrael@gmail.com
- **GitHub Sponsors:** https://github.com/newmassrael
- **GitHub Issues:** https://github.com/newmassrael/scxml-core-engine/issues

---

**Last Updated:** 2025-01-04
**Version:** 1.0
